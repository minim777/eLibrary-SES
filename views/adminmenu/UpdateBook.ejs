<!DOCTYPE html>
<html>
  <head>
    <title>eLibrary Management System: Browse All Books</title>
    <link rel="stylesheet" href="LibraryStyle.css" />
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
      integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <div id="tint">
      <div id="header">
        <h1>All Books in the Database</h1>
      </div>
      <!--Making search options-->
      <div id="subheader">
        <div id="searchoptions">
          <select id="searchby" name="filter" >
            <option selectDisabled>Select Filter</option>
            <option id="Title">Title</option>
            <option id="Author">Author</option>
            <option id="Genre">Category</option>
            <option id="Type">Type</option>
            <!--<option name="Alphabetical">Alphabetical </option> -->
          </select>
                <input id="searchInput" type="text" placeholder="Search Books..." />
                <input id="searchbutton" type="submit" value="Search" onclick = "searchCommand();" /> 
        </div>
      </div>
      <div id="booklist">
        <!-- creating a list -->
        <table id="bookTable">
          <tr class="header">
            <th style="width:20%"> Book ID</th>
            <th style="width:40%;">Title</th>
            <th style="width:15%;">Author</th>
            <th style="width:15%;">Category</th>
            <th style="width:10%;">Type</th>
          </tr>
          <% Books.forEach(Book => { %> 
            <tr id = "tr">
                <td><%= Book._id %></td>
                <td ><%= Book.title %></td>
                <td ><%= Book.author %></td>
                <td ><%= Book.category %></td>
                <td ><%= Book.type %></td>
              </tr>
          <% }) %>
          
        </table>
        <!-- creating search function -->
        <script>
          function searchCommand() {
            // Declare variables
            var input, filter, table, tr, td, i, txtValue, dropnum;
            input = document.getElementById("searchInput");
            filter = input.value.toUpperCase();
            table = document.getElementById("bookTable");
            tr = table.getElementsByTagName("tr");
            dropnum = document.getElementById("searchby").selectedIndex - 1;

            // Loop through all table rows, and hide those who don't match the search query
            for (i = 0; i < tr.length; i++) {
              td = tr[i].getElementsByTagName("td")[dropnum];
              if (td) {
                txtValue = td.textContent || td.innerText;
                if (txtValue.toUpperCase().indexOf(filter) > -1) {
                  tr[i].style.display = "";
                } else {
                  tr[i].style.display = "none";
                }
              }
            }
          }
        </script>
    <!-- creating add form -->
    <div id="header">
        <h1>Update a Book </h1>
    </div>    
    
        <form class="container" method="post" action="/">
            <div>
                <input class="form-control" name="id" placeholder="Enter the ID of the Book you wish to edit">
            </div>
            <div>
                <input class="form-control" name="title" placeholder="Enter new Title...">
            </div> 
            <div>
                <input class="form-control" name="author" placeholder="Enter new Author...">
            </div>  
            <div>
                <input class="form-control" name="category" placeholder="Enter new Category...">
            </div> 
            <div>
                <input class="form-control" name="type" placeholder="Enter new Type...">
            </div>    

            <div class="form-group">
                <button type="submit"> Update Book </button>
            </div>   
        </form>

      <footer>
        <p>Â© SES Group 3</p>
        <a href="#">Contact Us</a>
      </footer>
    </div>
  </body>
</html>
 