<!DOCTYPE html>
<html>
  <head>
    <title>eLibrary Management System: Browse All Books</title>
    <link rel="stylesheet" href="BrowseBooks.css" />
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
      integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <div id="tint">
      <div id="header">
        <h1>Browse All Books</h1>
      </div>
      <!--Making search options-->
      <div id="subheader">
        <div id="searchoptions">
          <select id="searchby" name="filter" >
            <option selectDisabled>Select Filter</option>
            <option id="Title">Title</option>
            <option id="Author">Author</option>
            <option id="Genre">Category</option>
            <option id="Type">Type</option>
            <!--<option name="Alphabetical">Alphabetical </option> -->
          </select>
                <input id="searchInput" type="text" placeholder="Search Books..." />
                <input id="searchbutton" type="submit" value="Search" onclick = "searchCommand();" /> 
        </div>
      </div>
      <div id="booklist">
        
        <!-- Add list using JS and HTML at a later stage -->

          
        <table id="bookTable">
          <tr class="header">
            <th style="width:40%;">Title</th>
            <th style="width:20%;">Author</th>
            <th style="width:20%;">Category</th>
            <th style="width:20%;">Type</th>
          </tr>
          <% Books.forEach(Book => { %> 
            <tr id = "tr">
                <td ><%= Book.title %></td>
                <td ><%= Book.author %></td>
                <td ><%= Book.category %></td>
                <td ><%= Book.type %></td>
              </tr>
          <% }) %>
          
        </table>


        <script>
          function searchCommand() {
            // Declare variables
            var input, filter, table, tr, td, i, txtValue, dropnum;
            input = document.getElementById("searchInput");
            filter = input.value.toUpperCase();
            table = document.getElementById("bookTable");
            tr = table.getElementsByTagName("tr");
            dropnum = document.getElementById("searchby").selectedIndex - 1;




            // Loop through all table rows, and hide those who don't match the search query
            for (i = 0; i < tr.length; i++) {
              td = tr[i].getElementsByTagName("td")[dropnum];
              if (td) {
                txtValue = td.textContent || td.innerText;
                if (txtValue.toUpperCase().indexOf(filter) > -1) {
                  tr[i].style.display = "";
                } else {
                  tr[i].style.display = "none";
                }
              }
            }
          }
        </script>

      <footer>
        <p>Â© SES Group 3</p>
        <a href="#">Contact Us</a>
      </footer>
    </div>
  </body>
</html>
